# ==========================================
# VARIABLES DE ENTORNO (Selecciona una)
# ==========================================

# 1. Entorno LOCAL
# @url = http://localhost:3000

# 2. Entorno VERCEL (Descomenta abajo y comenta arriba para usar)
@url = https://app-backend-khaki-one.vercel.app

# ==========================================
# 1. AUTENTICACIÓN (LOGIN)
# ==========================================

### Login ADMINISTRADOR
# (Usa este para crear usuarios y grados)
POST {{url}}/login
Content-Type: application/json

{
  "email": "admin@escuela.test",
  "password": "123456"
}

### Login MAESTRO
# (Usa este para crear tareas, incidencias, reportes)
POST {{url}}/login
Content-Type: application/json

{
  "email": "maestro@escuela.test",
  "password": "123456"
}

### Login ALUMNO
# (Usa este para probar que NO puedan crear/borrar, solo ver)
POST {{url}}/login
Content-Type: application/json

{
  "email": "alumno@escuela.test",
  "password": "123456"
}

### Obtener datos del usuario actual (Me)
GET {{url}}/me

### Cerrar Sesión
DELETE {{url}}/logout


# ==========================================
# 2. GESTIÓN DE USUARIOS (Solo Admin)
# ==========================================

### Obtener todos los usuarios
GET {{url}}/users

### Obtener usuario por ID (Reemplaza UUID)
GET {{url}}/users/TU_UUID_AQUI

### Crear Usuario MAESTRO
POST {{url}}/users
Content-Type: application/json

{
  "name": "Profesor Juan",
  "email": "maestro@escuela.test",
  "password": "123456",
  "confPassword": "123456",
  "role": "maestro"
}

### Crear Usuario ALUMNO
# (Importante: Recuerda el ID de este usuario para vincularlo luego en "Alumnos")
POST {{url}}/users
Content-Type: application/json

{
  "name": "Alumno Pepito",
  "email": "alumno2@escuela.test",
  "password": "123456",
  "confPassword": "123456",
  "role": "alumno"
}

### Actualizar Usuario
PATCH {{url}}/users/TU_UUID_AQUI
Content-Type: application/json

{
  "name": "Nombre Editado",
  "email": "alumno@escuela.test",
  "password": "",
  "confPassword": "",
  "role": "alumno"
}

### Eliminar Usuario
DELETE {{url}}/users/TU_UUID_AQUI


# ==========================================
# 3. GESTIÓN DE GRADOS (Admin / Maestro)
# ==========================================

### Obtener Grados
GET {{url}}/grados

### Crear Grado
# (maestroId debe ser el ID numérico de la tabla Users, no el UUID)
POST {{url}}/grados
Content-Type: application/json

{
  "nombre": "6to Computación - Preparatoria",
  "maestroId": 2
}

### Eliminar Grado
DELETE {{url}}/grados/TU_UUID_GRADO_AQUI


# ==========================================
# 4. GESTIÓN DE PERFILES DE ALUMNOS
# ==========================================

### Crear Perfil de Alumno
# userId: Es el ID numérico del usuario creado en el paso 2.
# gradoId: Es el ID numérico del grado creado en el paso 3.
POST {{url}}/alumnos
Content-Type: application/json

{
  "nombre": "Pepito",
  "apellido": "Pérez",
  "matricula": "2023-A001",
  "tutor": "Sr. Pérez",
  "gradoId": 1,
  "userId": 2
}

### Ver Alumnos (Filtra según quién esté logueado)
GET {{url}}/alumnos

### Ver Alumno por ID
GET {{url}}/alumnos/TU_UUID_ALUMNO_AQUI


# ==========================================
# 5. TAREAS (Maestro Crea / Alumno Lee)
# ==========================================

### Obtener Tareas
GET {{url}}/tareas

### Crear Tarea (Solo Maestro)
# alumnoId: ID numérico del alumno (perfil)
POST {{url}}/tareas
Content-Type: application/json

{
  "titulo": "Matemáticas - Fracciones",
  "descripcion": "Resolver página 20 del libro",
  "fechaAsignacion": "2023-10-27",
  "fechaEntrega": "2023-10-30",
  "alumnoId": 1
}

### Actualizar Tarea
PATCH {{url}}/tareas/TU_UUID_TAREA_AQUI
Content-Type: application/json

{
  "titulo": "Matemáticas - Fracciones (Corregido)"
}

### Eliminar Tarea
DELETE {{url}}/tareas/TU_UUID_TAREA_AQUI


# ==========================================
# 6. REPORTES Y INCIDENCIAS
# ==========================================

### Crear Reporte (Solo Maestro/Admin)
POST {{url}}/reportes
Content-Type: application/json

{
  "titulo": "Comportamiento inadecuado",
  "contenido": "El alumno estuvo gritando en clase.",
  "alumnoId": 1
}

### Ver Reportes
GET {{url}}/reportes

### Crear Incidencia
POST {{url}}/incidencias
Content-Type: application/json

{
  "tipo": "Salud",
  "descripcion": "Dolor de estómago",
  "fecha": "2023-10-27",
  "alumnoId": 1
}

### Ver Incidencias
GET {{url}}/incidencias


# ==========================================
# 7. ASISTENCIA
# ==========================================

### Pasar Lista (Asistencia Alumno)
POST {{url}}/asistencia
Content-Type: application/json

{
  "fecha": "2023-10-27",
  "estado": "Presente",
  "alumnoId": 1
}

### Ver Asistencia
GET {{url}}/asistencia